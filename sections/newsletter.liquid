{% style %}
  .newsletter-{{ section.id }} {
    background-color: {{ section.settings.color_background }};
    color: {{ section.settings.color_text }};
  }
{% endstyle %}

<div class="newsletter-section newsletter-{{ section.id }}{% if section.settings.color_background == settings.color_body_bg %} newsletter-section--with-divider{% endif %}">
  <div class="page-width text-center">
    {% if section.settings.newsletter_image != blank %}
      <div class="newsletter_image"><img src="{{ section.settings.newsletter_image | img_url: 'original' }}" alt="newsletter_image" /></div>
    {% endif %}
    {% if section.settings.title != blank %}
      <p class="h3">{{ section.settings.title | escape }}</p>
    {% endif %}
    {% if section.settings.text != blank %}
      <div class="rte">{{ section.settings.text }}</div>
    {% endif %}

    {% include 'newsletter-form', section_id: section.id, snippet_context: 'section' %}
  </div>
</div>

{% schema %}
  {
 	"name": "Newsletter",
 	"class": "index-section newsletter_section",
 	"settings": [{
 			"type": "paragraph",
 			"content": "Customers who subscribe will have their email address added to the 'accepts marketing' [customer list](/admin/customers?query=&accepts_marketing=1)."
 		},
 		{
 			"type": "image_picker",
 			"id": "newsletter_image",
 			"label": "Newsletter Image"
 		},
 		{
 			"type": "text",
 			"id": "title",
 			"label": "Heading",
 			"default": "Sign up and save"
 		},
 		{
 			"type": "richtext",
 			"id": "text",
 			"label": "Subheading",
 			"default": "<p>Subscribe to get special offers, free giveaways, and once-in-a-lifetime deals.</p>"
 		},
 		{
 			"type": "color",
 			"id": "color_background",
 			"label": "Background",
 			"default": "#f9f9f9"
 		},
 		{
 			"type": "color",
 			"id": "color_text",
 			"label": "Text",
 			"default": "#1c1d1d"
 		}
 	],
 	"presets": [{
 		"name": "Newsletter",
 		"category": "Promotional"
 	}]
 }
{% endschema %}
